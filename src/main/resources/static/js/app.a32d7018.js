(function(){"use strict";var e={1620:function(e,a,t){var n=t(5130),o=t(6768);function r(e,a,t,n,r,l){return(0,o.uX)(),(0,o.Wv)((0,o.$y)(r.currentView),{onUploadSuccess:l.navigateToEditor},null,40,["onUploadSuccess"])}var l=t(4232);const s={class:"home-container"},i={key:0,class:"toast-message"},d={class:"upload-section"},u={class:"upload-container"},c={class:"drop-zone-content"},p={class:"upload-icon"},v={key:0,width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},f={key:1,class:"loading-spinner"},h={class:"upload-text"},y={key:0,class:"primary-text"},k={key:1,class:"primary-text"},m=["disabled"];function g(e,a,t,n,r,g){return(0,o.uX)(),(0,o.CE)("div",s,[n.errorMessage?((0,o.uX)(),(0,o.CE)("div",i,(0,l.v_)(n.errorMessage),1)):(0,o.Q3)("",!0),a[9]||(a[9]=(0,o.Lk)("header",{class:"hero-section"},[(0,o.Lk)("div",{class:"hero-content"},[(0,o.Lk)("h1",{class:"hero-title"},"PKES Save Editor"),(0,o.Lk)("p",{class:"hero-description"}," Web save editor for Pokémon Essentials based games ")])],-1)),(0,o.Lk)("section",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",{class:(0,l.C4)(["drop-zone",{"drag-over":n.isDragOver,uploading:n.isUploading}]),onDrop:a[2]||(a[2]=(...e)=>n.handleDrop&&n.handleDrop(...e)),onDragover:a[3]||(a[3]=(...e)=>n.handleDragOver&&n.handleDragOver(...e)),onDragenter:a[4]||(a[4]=(...e)=>n.handleDragEnter&&n.handleDragEnter(...e)),onDragleave:a[5]||(a[5]=(...e)=>n.handleDragLeave&&n.handleDragLeave(...e))},[(0,o.Lk)("div",c,[(0,o.Lk)("div",p,[n.isUploading?((0,o.uX)(),(0,o.CE)("div",f)):((0,o.uX)(),(0,o.CE)("svg",v,[...a[6]||(a[6]=[(0,o.Lk)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),(0,o.Lk)("polyline",{points:"7,10 12,15 17,10"},null,-1),(0,o.Lk)("line",{x1:"12",y1:"15",x2:"12",y2:"3"},null,-1)])]))]),(0,o.Lk)("div",h,[n.isUploading?((0,o.uX)(),(0,o.CE)("p",k,"Uploading...")):((0,o.uX)(),(0,o.CE)("p",y," Upload to drag or click here ")),a[7]||(a[7]=(0,o.Lk)("p",{class:"secondary-text"},[(0,o.Lk)("strong",null,"Allowed format:"),(0,o.eW)(" rxdata ")],-1)),a[8]||(a[8]=(0,o.Lk)("p",{class:"file-size-text"},"Max File Size: 10MB",-1))]),(0,o.Lk)("input",{ref:"fileInput",type:"file",class:"file-input",accept:".rxdata",onChange:a[0]||(a[0]=(...e)=>n.handleFileSelect&&n.handleFileSelect(...e))},null,544),(0,o.Lk)("button",{class:"browse-button",onClick:a[1]||(a[1]=(...e)=>n.triggerFileInput&&n.triggerFileInput(...e)),disabled:n.isUploading}," Select File ",8,m)])],34)])])])}var b=t(144),D={name:"HomePage",emits:["upload-success"],setup(e,a){const t=(0,b.KR)(null),n=(0,b.KR)(!1),o=(0,b.KR)(!1),r=(0,b.KR)("");let l=null;const s=10485760,i=e=>{e.preventDefault(),n.value=!0},d=e=>{e.preventDefault(),n.value=!0},u=e=>{e.preventDefault(),n.value=!1},c=e=>{e.preventDefault(),n.value=!1;const a=Array.from(e.dataTransfer.files);a.length>0&&f(a[0])},p=e=>{const a=Array.from(e.target.files);a.length>0&&f(a[0])},v=()=>{t.value?.click()},f=async e=>{if(m(),h(e))try{o.value=!0,await y(e)}catch(a){k("Failed to upload.")}finally{o.value=!1,t.value.value=""}else t.value.value=""},h=e=>{if(e.size>s)return k("File size is too large."),!1;const a=e.name.split(".").pop().toLowerCase();return"rxdata"===a||(k("Please upload rxdata file."),!1)},y=async e=>{const t=new FormData;t.append("file",e);try{const e=await fetch("/api/upload",{method:"POST",body:t});if(!e.ok){const a=await e.text();throw new Error(`Server responded with ${e.status}: ${a}`)}const n=await e.json();sessionStorage.setItem("saveData",JSON.stringify(n)),a.emit("upload-success")}catch(n){throw console.error("Upload failed details:",n),new Error("Upload failed")}},k=e=>{l&&clearTimeout(l),r.value=e,l=setTimeout(()=>{r.value=""},2e3)},m=()=>{l&&(clearTimeout(l),l=null),r.value=""};return{fileInput:t,isDragOver:n,isUploading:o,errorMessage:r,handleDragOver:i,handleDragEnter:d,handleDragLeave:u,handleDrop:c,handleFileSelect:p,triggerFileInput:v,clearError:m}}},L=t(1241);const E=(0,L.A)(D,[["render",g],["__scopeId","data-v-700d71c8"]]);var w=E;const V={class:"editor-container"},C={class:"editor-header"},O={key:0,class:"error-message"},U={key:1,class:"data-root"},X={key:2,class:"loading-message"};function S(e,a,t,n,r,s){const i=(0,o.g2)("DataNode");return(0,o.uX)(),(0,o.CE)("div",V,[(0,o.Lk)("header",C,[a[2]||(a[2]=(0,o.Lk)("h1",null,"PKES Save Editor",-1)),(0,o.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>s.handleSave&&s.handleSave(...e)),class:"save-button"},"Download")]),r.error?((0,o.uX)(),(0,o.CE)("div",O,[a[3]||(a[3]=(0,o.Lk)("p",null,"Failed to load the save data.",-1)),(0,o.Lk)("pre",null,(0,l.v_)(r.error),1)])):(0,o.Q3)("",!0),r.saveData?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.bF)(i,{"node-key":"saveData",modelValue:r.saveData,"onUpdate:modelValue":a[1]||(a[1]=e=>r.saveData=e)},null,8,["modelValue"])])):((0,o.uX)(),(0,o.CE)("div",X,[...a[4]||(a[4]=[(0,o.Lk)("p",null,"Loading save data...",-1)])]))])}t(4603),t(7566),t(8721);const x={class:"data-node"},j={key:0,open:""},F={class:"node-key object-key"},_={class:"node-children"},A={key:1,open:""},I={class:"node-key array-key"},K={class:"node-children"},R={key:2,class:"node-leaf"},N={class:"node-key primitive-key"},T={key:0,class:"ref-value"};function P(e,a,t,r,s,i){const d=(0,o.g2)("DataNode",!0);return(0,o.uX)(),(0,o.CE)("div",x,[i.isObject&&!i.isRef?((0,o.uX)(),(0,o.CE)("details",j,[(0,o.Lk)("summary",F,[(0,o.eW)((0,l.v_)(t.nodeKey)+": ",1),a[3]||(a[3]=(0,o.Lk)("span",null,"{...}",-1))]),(0,o.Lk)("div",_,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.nodeData,(e,a)=>((0,o.uX)(),(0,o.Wv)(d,{key:a,"node-key":a,modelValue:i.nodeData[a],"onUpdate:modelValue":e=>i.nodeData[a]=e},null,8,["node-key","modelValue","onUpdate:modelValue"]))),128))])])):i.isArray?((0,o.uX)(),(0,o.CE)("details",A,[(0,o.Lk)("summary",I,[(0,o.eW)((0,l.v_)(t.nodeKey)+": ",1),a[4]||(a[4]=(0,o.Lk)("span",null,"[...]",-1))]),(0,o.Lk)("div",K,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.nodeData,(e,a)=>((0,o.uX)(),(0,o.Wv)(d,{key:a,"node-key":a,modelValue:i.nodeData[a],"onUpdate:modelValue":e=>i.nodeData[a]=e},null,8,["node-key","modelValue","onUpdate:modelValue"]))),128))])])):((0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("label",N,(0,l.v_)(t.nodeKey)+":",1),i.isRef?((0,o.uX)(),(0,o.CE)("span",T,"↪ Circular Ref ("+(0,l.v_)(i.nodeData._class)+")",1)):i.isBoolean?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>i.editableValue=e)},null,512)),[[n.lH,i.editableValue]]):i.isNumber?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:2,type:"number","onUpdate:modelValue":a[1]||(a[1]=e=>i.editableValue=e),class:"value-input"},null,512)),[[n.Jo,i.editableValue,void 0,{number:!0}]]):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:3,type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>i.editableValue=e),class:"value-input"},null,512)),[[n.Jo,i.editableValue]])]))])}var M={name:"DataNode",props:{modelValue:{required:!0},nodeKey:{type:[String,Number],required:!0}},emits:["update:modelValue"],computed:{editableValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},nodeData(){return this.modelValue},isObject(){return"object"===typeof this.nodeData&&null!==this.nodeData&&!Array.isArray(this.nodeData)},isArray(){return Array.isArray(this.nodeData)},isRef(){return this.isObject&&Object.prototype.hasOwnProperty.call(this.nodeData,"_ref")},isBoolean(){return"boolean"===typeof this.nodeData},isNumber(){return"number"===typeof this.nodeData}}};const W=(0,L.A)(M,[["render",P],["__scopeId","data-v-010a4cca"]]);var z=W,B={name:"EditorView",components:{DataNode:z},data(){return{saveData:null,error:null}},created(){try{const e=sessionStorage.getItem("saveData");e&&(this.saveData=JSON.parse(e))}catch(e){console.error("Failed to parse save data:",e),this.error=e.message}},methods:{handleSave(){if(!this.saveData)return void alert("There's no data to modify.");const e=JSON.stringify(this.saveData,null,2),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),n=document.createElement("a");n.href=t,n.download="edited_save.json",n.click(),URL.revokeObjectURL(t)}}};const H=(0,L.A)(B,[["render",S],["__scopeId","data-v-4b04f517"]]);var J=H,$={name:"App",components:{Home:w,EditorView:J},data(){return{currentView:"Home"}},methods:{navigateToEditor(){this.currentView="EditorView"}}};const q=(0,L.A)($,[["render",r]]);var Q=q;(0,n.Ef)(Q).mount("#app")}},a={};function t(n){var o=a[n];if(void 0!==o)return o.exports;var r=a[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,n,o,r){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var s=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(t.O).every(function(e){return t.O[e](n[i])})?n.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(u--,1);var d=o();void 0!==d&&(a=d)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var o,r,l=n[0],s=n[1],i=n[2],d=0;if(l.some(function(a){return 0!==e[a]})){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(i)var u=i(t)}for(a&&a(n);d<l.length;d++)r=l[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},n=self["webpackChunkvue"]=self["webpackChunkvue"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],function(){return t(1620)});n=t.O(n)})();
//# sourceMappingURL=app.a32d7018.js.map