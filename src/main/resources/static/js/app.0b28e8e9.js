(function(){"use strict";var e={1550:function(e,a,t){var o=t(5130),n=t(6768);function r(e,a,t,o,r,l){return(0,n.uX)(),(0,n.Wv)((0,n.$y)(r.currentView),{onUploadSuccess:l.navigateToEditor},null,40,["onUploadSuccess"])}var l=t(4232);const s={class:"home-container"},i={key:0,class:"toast-message"},d={class:"upload-section"},u={class:"upload-container"},c={class:"drop-zone-content"},p={class:"upload-icon"},v={key:0,width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},h={key:1,class:"loading-spinner"},f={class:"upload-text"},y={key:0,class:"primary-text"},m={key:1,class:"primary-text"},k=["disabled"];function g(e,a,t,o,r,g){return(0,n.uX)(),(0,n.CE)("div",s,[o.errorMessage?((0,n.uX)(),(0,n.CE)("div",i,(0,l.v_)(o.errorMessage),1)):(0,n.Q3)("",!0),a[9]||(a[9]=(0,n.Lk)("header",{class:"hero-section"},[(0,n.Lk)("div",{class:"hero-content"},[(0,n.Lk)("h1",{class:"hero-title"},"PKES Save Editor"),(0,n.Lk)("p",{class:"hero-description"}," Web save editor for Pokémon Essentials based games ")])],-1)),(0,n.Lk)("section",d,[(0,n.Lk)("div",u,[(0,n.Lk)("div",{class:(0,l.C4)(["drop-zone",{"drag-over":o.isDragOver,uploading:o.isUploading}]),onDrop:a[2]||(a[2]=(...e)=>o.handleDrop&&o.handleDrop(...e)),onDragover:a[3]||(a[3]=(...e)=>o.handleDragOver&&o.handleDragOver(...e)),onDragenter:a[4]||(a[4]=(...e)=>o.handleDragEnter&&o.handleDragEnter(...e)),onDragleave:a[5]||(a[5]=(...e)=>o.handleDragLeave&&o.handleDragLeave(...e))},[(0,n.Lk)("div",c,[(0,n.Lk)("div",p,[o.isUploading?((0,n.uX)(),(0,n.CE)("div",h)):((0,n.uX)(),(0,n.CE)("svg",v,[...a[6]||(a[6]=[(0,n.Lk)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),(0,n.Lk)("polyline",{points:"7,10 12,15 17,10"},null,-1),(0,n.Lk)("line",{x1:"12",y1:"15",x2:"12",y2:"3"},null,-1)])]))]),(0,n.Lk)("div",f,[o.isUploading?((0,n.uX)(),(0,n.CE)("p",m,"Uploading...")):((0,n.uX)(),(0,n.CE)("p",y," Upload to drag or click here ")),a[7]||(a[7]=(0,n.Lk)("p",{class:"secondary-text"},[(0,n.Lk)("strong",null,"Allowed format:"),(0,n.eW)(" rxdata ")],-1)),a[8]||(a[8]=(0,n.Lk)("p",{class:"file-size-text"},"Max File Size: 10MB",-1))]),(0,n.Lk)("input",{ref:"fileInput",type:"file",class:"file-input",accept:".rxdata",onChange:a[0]||(a[0]=(...e)=>o.handleFileSelect&&o.handleFileSelect(...e))},null,544),(0,n.Lk)("button",{class:"browse-button",onClick:a[1]||(a[1]=(...e)=>o.triggerFileInput&&o.triggerFileInput(...e)),disabled:o.isUploading}," Select File ",8,k)])],34)])])])}var b=t(144),D={name:"HomePage",emits:["upload-success"],setup(e,a){const t=(0,b.KR)(null),o=(0,b.KR)(!1),n=(0,b.KR)(!1),r=(0,b.KR)("");let l=null;const s=10485760,i=e=>{e.preventDefault(),o.value=!0},d=e=>{e.preventDefault(),o.value=!0},u=e=>{e.preventDefault(),o.value=!1},c=e=>{e.preventDefault(),o.value=!1;const a=Array.from(e.dataTransfer.files);a.length>0&&h(a[0])},p=e=>{const a=Array.from(e.target.files);a.length>0&&h(a[0])},v=()=>{t.value?.click()},h=async e=>{if(k(),f(e))try{n.value=!0,await y(e)}catch(a){m("Failed to upload.")}finally{n.value=!1,t.value.value=""}else t.value.value=""},f=e=>{if(e.size>s)return m("File size is too large."),!1;const a=e.name.split(".").pop().toLowerCase();return"rxdata"===a||(m("Please upload rxdata file."),!1)},y=async e=>{const t=new FormData;t.append("file",e);try{const e=await fetch("/api/upload",{method:"POST",body:t});if(!e.ok){const a=await e.text();throw new Error(`Server responded with ${e.status}: ${a}`)}const o=await e.json();sessionStorage.setItem("saveData",JSON.stringify(o)),a.emit("upload-success")}catch(o){throw console.error("Upload failed details:",o),new Error("Upload failed")}},m=e=>{l&&clearTimeout(l),r.value=e,l=setTimeout(()=>{r.value=""},2e3)},k=()=>{l&&(clearTimeout(l),l=null),r.value=""};return{fileInput:t,isDragOver:o,isUploading:n,errorMessage:r,handleDragOver:i,handleDragEnter:d,handleDragLeave:u,handleDrop:c,handleFileSelect:p,triggerFileInput:v,clearError:k}}},w=t(1241);const E=(0,w.A)(D,[["render",g],["__scopeId","data-v-700d71c8"]]);var L=E;const C={class:"editor-container"},V={class:"editor-header"},O={key:0,class:"error-message"},x={key:1,class:"data-root"},S={key:2,class:"loading-message"};function U(e,a,t,o,r,s){const i=(0,n.g2)("DataNode");return(0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("header",V,[a[2]||(a[2]=(0,n.Lk)("h1",null,"PKES Save Editor",-1)),(0,n.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>s.handleSave&&s.handleSave(...e)),class:"save-button"},"Download")]),r.error?((0,n.uX)(),(0,n.CE)("div",O,[a[3]||(a[3]=(0,n.Lk)("p",null,"Failed to load the save data.",-1)),(0,n.Lk)("pre",null,(0,l.v_)(r.error),1)])):(0,n.Q3)("",!0),r.saveData?((0,n.uX)(),(0,n.CE)("div",x,[(0,n.bF)(i,{"node-key":"saveData",modelValue:r.saveData,"onUpdate:modelValue":a[1]||(a[1]=e=>r.saveData=e)},null,8,["modelValue"])])):((0,n.uX)(),(0,n.CE)("div",S,[...a[4]||(a[4]=[(0,n.Lk)("p",null,"Loading save data...",-1)])]))])}t(4603),t(7566),t(8721);const X={class:"data-node"},F={key:0,open:""},_={class:"node-key object-key"},j={class:"node-children"},A={key:1,open:""},T={class:"node-key array-key"},I={class:"node-children"},K={key:2,class:"node-leaf"},R={class:"node-key primitive-key"},P={key:0,class:"ref-value"};function N(e,a,t,r,s,i){const d=(0,n.g2)("DataNode",!0);return(0,n.uX)(),(0,n.CE)("div",X,[i.isObject&&!i.isRef?((0,n.uX)(),(0,n.CE)("details",F,[(0,n.Lk)("summary",_,[(0,n.eW)((0,l.v_)(t.nodeKey)+": ",1),a[3]||(a[3]=(0,n.Lk)("span",null,"{...}",-1))]),(0,n.Lk)("div",j,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.nodeData,(e,a)=>((0,n.uX)(),(0,n.Wv)(d,{key:a,"node-key":a,modelValue:i.nodeData[a],"onUpdate:modelValue":e=>i.nodeData[a]=e},null,8,["node-key","modelValue","onUpdate:modelValue"]))),128))])])):i.isArray?((0,n.uX)(),(0,n.CE)("details",A,[(0,n.Lk)("summary",T,[(0,n.eW)((0,l.v_)(t.nodeKey)+": ",1),a[4]||(a[4]=(0,n.Lk)("span",null,"[...]",-1))]),(0,n.Lk)("div",I,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.nodeData,(e,a)=>((0,n.uX)(),(0,n.Wv)(d,{key:a,"node-key":a,modelValue:i.nodeData[a],"onUpdate:modelValue":e=>i.nodeData[a]=e},null,8,["node-key","modelValue","onUpdate:modelValue"]))),128))])])):((0,n.uX)(),(0,n.CE)("div",K,[(0,n.Lk)("label",R,(0,l.v_)(t.nodeKey)+":",1),i.isRef?((0,n.uX)(),(0,n.CE)("span",P,"↪ Circular Ref ("+(0,l.v_)(i.nodeData._class)+")",1)):i.isBoolean?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:1,type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>i.editableValue=e)},null,512)),[[o.lH,i.editableValue]]):i.isNumber?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:2,type:"number","onUpdate:modelValue":a[1]||(a[1]=e=>i.editableValue=e),class:"value-input"},null,512)),[[o.Jo,i.editableValue,void 0,{number:!0}]]):(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:3,type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>i.editableValue=e),class:"value-input"},null,512)),[[o.Jo,i.editableValue]])]))])}var M={name:"DataNode",props:{modelValue:{required:!0},nodeKey:{type:[String,Number],required:!0}},emits:["update:modelValue"],computed:{editableValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},nodeData(){return this.modelValue},isObject(){return"object"===typeof this.nodeData&&null!==this.nodeData&&!Array.isArray(this.nodeData)},isArray(){return Array.isArray(this.nodeData)},isRef(){return this.isObject&&Object.prototype.hasOwnProperty.call(this.nodeData,"_ref")},isBoolean(){return"boolean"===typeof this.nodeData},isNumber(){return"number"===typeof this.nodeData}}};const W=(0,w.A)(M,[["render",N],["__scopeId","data-v-2d669329"]]);var z=W,H={name:"EditorView",components:{DataNode:z},data(){return{saveData:null,error:null}},created(){try{const e=sessionStorage.getItem("saveData");e&&(this.saveData=JSON.parse(e))}catch(e){console.error("Failed to parse save data:",e),this.error=e.message}},methods:{async handleSave(){if(this.saveData)try{const e=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.saveData)});if(!e.ok)throw new Error(`Server error: ${e.statusText}`);const a=await e.blob(),t=URL.createObjectURL(a),o=document.createElement("a");o.href=t,o.download="edited_save.rxdata",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)}catch(e){console.error("Download failed:",e),alert("Failed to download the .rxdata file. Please check the console for more details.")}else alert("There's no data to modify.")}}};const J=(0,w.A)(H,[["render",U],["__scopeId","data-v-2703bbb5"]]);var $=J,B={name:"App",components:{Home:L,EditorView:$},data(){return{currentView:"Home"}},methods:{navigateToEditor(){this.currentView="EditorView"}}};const q=(0,w.A)(B,[["render",r]]);var Q=q;(0,o.Ef)(Q).mount("#app")}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var r=a[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,o,n,r){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],r=e[u][2];for(var s=!0,i=0;i<o.length;i++)(!1&r||l>=r)&&Object.keys(t.O).every(function(e){return t.O[e](o[i])})?o.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(u--,1);var d=n();void 0!==d&&(a=d)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,n,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,o){var n,r,l=o[0],s=o[1],i=o[2],d=0;if(l.some(function(a){return 0!==e[a]})){for(n in s)t.o(s,n)&&(t.m[n]=s[n]);if(i)var u=i(t)}for(a&&a(o);d<l.length;d++)r=l[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},o=self["webpackChunkvue"]=self["webpackChunkvue"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],function(){return t(1550)});o=t.O(o)})();
//# sourceMappingURL=app.0b28e8e9.js.map